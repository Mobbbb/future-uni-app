"use strict";const e=require("../../common/vendor.js"),a=require("../../request.api/index.js");if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-card"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+n+(()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js"))();const n=()=>"../../components/gc-button.js",s={__name:"index",setup(n){const s=new e.useStore,t=e.ref(""),o=e.ref(""),i=e.computed((()=>s.getters["app/isLogin"])),u=async()=>{if(t.value&&o.value){const e=await a.fetchUserLogin(t.value,o.value);c(e)}else e.index.showToast({title:"账号/密码不得为空",duration:2e3})},c=async a=>{const{data:n={},success:t,msg:o}=a,i=a.cookies;var u;e.index.showToast({title:o,duration:2e3,icon:t&&i.length?"success":"error"}),t&&i.length&&(n.cookies=i,u=n,s.dispatch("app/saveLoginStatus",u),await(e=>s.dispatch("app/INIT_USER",e))(),e.index.switchTab({url:"/pages/mine/index"}))};return e.onMounted((()=>{i.value&&e.index.switchTab({url:"/pages/mine/index"})})),(a,n)=>({a:e.o((e=>t.value=e)),b:e.p({placeholder:"请输入账号",modelValue:t.value}),c:e.o((e=>o.value=e)),d:e.p({type:"password",placeholder:"请输入密码",modelValue:o.value}),e:e.o(u),f:e.p({type:"active",width:"100%"}),g:e.p({padding:"24px 10px"})})}},t=e._export_sfc(s,[["__scopeId","data-v-3f20fada"]]);wx.createPage(t);
